# todo
----
1. 代码框架和布线。现役队员及顾问使用git多人协作，退役队员若有建议可以push代码请求merge。

2. 重新学习can协议。

3. 如果工程电机太多，一个电池无法供电，需要用裁判系统输出端口作为继电器信号，控制多个电池。 

4. 救援、障碍块、云台、视觉。



# issue
----
1. hal库连续调用2次can发送函数，第2次会影响第1次吗？

2. 工程抓手的角度值计算是否满足要求，若不满足要求则在抓手上加陀螺仪。

3. 工程升降电机同步问题。



# rm2023工程电控培训
----
1. 工程代码框架、命名规范和布线。暑假先重新阅读官方例程和开源代码，官方例程有一点臃肿。阅读完代码后再统一代码框架和命名规范等。可以先修改本赛季工程代码用于调试，但是后面要按照规定的代码框架重写。要有一套能够传承下去的代码框架。
代码框架要求：简洁、命名规范统一。



# 论坛开源资料
----
[论坛开源汇总](https://bbs.robomaster.com/forum.php?mod=viewthread&tid=6979&extra=page%3D1)

## RM2021高校课程沙龙-江苏05-嵌入式经验分享(东南大学)
[视频链接](https://docs.qq.com/sheet/DUFlaU0FHZk1QS0l1?tab=cx5q1v)

1. FreeRTOS各任务之间尽量互不干扰，便于单独调试。正常情况下不允许有任务阻塞其他进程。创建一个LED BLINK任务，优先级最低，便于观察程序跑飞。

2. 任务调度可以使用systemview进行分析。

3. 对于一些要求精确时间的任务（比如PID控制任务要有精确的周期），尽量设置较高的优先级。

4. 全队代码框架和命名规范一致，便于代码复用和各车组间合作。

5. 为避免多个任务同时调用can发送数据包，存在冲突而发送失败的情况，可以建立一个can发送队列。
![canqueen](./pic/canqueen.png)

6. 超级电容：不能用裁判系统的功率数据进行超级电容的闭环控制。可以用simulink调试电路pid，不建议调试电机pid（建模难度大）。

7. 稳定性：
    - 不放过调试过程中的任何小问题，比如焊线，焊线不稳一定要重焊。
    - 和机械组沟通好布线问题
    - 尽量采用简洁的方案，更少的传感器。

8. 培训经验：注释认真写。

## RM圆桌第九期-PID控制深透析
[链接](https://bbs.robomaster.com/thread-8106-1-1.html)

1. 串级PID内环计算频率≥外环计算频率，在RM中=即可。

2. 只用PI控制即可，没必要增加高频相应。
>现实系统都有低通特性，没有特殊或严格要求没必要加微分项。

3. 云台俯仰时底盘陀螺仪测的数据不是云台的实际角速度数据，而是云台实际角速度数据的分量。所以数据需要相应的旋转，或在云台上放个陀螺仪测云台相对于地面的绝对角度，底盘旋转不会影响云台PID。

4. 陀螺仪尽量安装在车子中轴线，远离震动源。MEMS陀螺仪会收到加速度干扰。



 